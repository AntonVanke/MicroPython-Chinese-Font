with open("test.bmf", "rb") as bmf:
    bmf.seek(0, 0)
    version = bmf.read(1)
    bmf.seek(1, 0)
    start = bmf.read(3)
    start = (start[0] << 16) + (start[1] << 8) + start[2]
    bmf.seek(9, 0)
    words = bmf.read(start - 9).decode("utf-8")
    print("已载入字体，BMF 版本号：", version[0])

bmf_file = open("mszT.bmf", "rb")


def get_bitmap(word):
    index = words.find(word)
    if index == -1:
        return [0x00, 0x7F, 0x7F, 0x67, 0x6B, 0x75, 0x7A, 0x7D, 0x7D, 0x7A, 0x75, 0x6B, 0x67, 0x7F, 0x7F, 0x00, 0x00,
                0xFE, 0xFE, 0xE6, 0xD6, 0xAE, 0x5E, 0xBE, 0xBE, 0x5E, 0xAE, 0xD6, 0xE6, 0xFE, 0xFE, 0x00]
    bmf_file.seek(start + 32 * index, 0)
    return list(bmf_file.read(32))


print(words)
a = get_bitmap("你")
print(a)
# buf = framebuf.FrameBuffer(
#     [0x00, 0x01, 0x06, 0x1F, 0xE0, 0x02, 0x04, 0x18, 0xF0, 0x10, 0x13, 0x10, 0x10, 0x14, 0x18, 0x00, 0x80, 0x00, 0x00,
#      0xFF, 0x00, 0x08, 0x30, 0xC0, 0x02, 0x01, 0xFE, 0x00, 0x80, 0x60, 0x18, 0x00], 16, 16, framebuf.MONO_HLSB)
# OLED.blit(buf, 0, 0)
# [32, 0, 0, 0, 0, 0, 1, 15, 56, 19, 4, 28, 53, 4, 7, 6, 4, 0, 0, 0, 96, 128, 0, 252, 0, 56, 68, 4, 254, 248, 0, 32]
# [64, 64, 64, 0, 0, 4, 6, 12, 9, 10, 26, 40, 73, 74, 10, 10, 9, 0, 0, 0, 0, 64, 192, 128, 252, 24, 80, 96, 96, 110, 102, 98]

# [0x00,0x01,0x06,0x1F,0xE0,0x02,0x04,0x18,0xF0,0x10,0x13,0x10,0x10,0x14,0x18,0x00, 0x80,0x00,0x00,0xFF,0x00,0x08,0x30,0xC0,0x02,0x01,0xFE,0x00,0x80,0x60,0x18,0x00]
#
# [0x08,0x08,0x08,0x11,0x11,0x32,0x34,0x50,0x91,0x11,0x12,0x12,0x14,0x10,0x10,0x10,0x80,0x80,0x80,0xFE,0x02,0x04,0x20,0x20,0x28,0x24,0x24,0x22,0x22,0x20,0xA0,0x40]
#

# [0,0x1F,0xF8,0x1F,0xF8,0x1F,0xF8,0x1F,0xF8,0x1F,0xF8,0x1F,0x07,0xE0,0x07,0xE0,0x07,0xE0,0x07,0xE0,0xFF,0xFF,0xF8,0x1F,0xF8,0x1F,0xF8,0x1F,0xF8,0x1F,0xF8,0x1F]
# [0x10,0x01,0x10,0x01,0x10,0x01,0x88,0x7F,0x88,0x40,0x4C,0x20,0x2C,0x04,0x0A,0x04,0x89,0x14,0x88,0x24,0x48,0x24,0x48,0x44,0x28,0x44,0x08,0x04,0x08,0x05,0x08,0x02]
